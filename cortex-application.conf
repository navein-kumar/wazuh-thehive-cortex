# Cortex 3.1.1 Working Configuration
# Based on official documentation and community solutions

# Play framework configuration - REQUIRED
play.http.secret.key = "cortex-docker-secret-key-change-in-production"

# Database configuration - Elasticsearch
search {
  # Index name for Cortex data
  index = cortex
  # Elasticsearch connection
  uri = "http://elasticsearch:9200"
}

# Authentication configuration
auth {
  # Authentication providers
  provider = [local]

  # Local authentication
  local {
    # Allow user registration during initial setup
    allowRegistration = false
  }
}

# Analyzer configuration - CRITICAL
analyzer {
  # Official analyzer catalog URLs
  urls = [
    "https://download.thehive-project.org/analyzers.json"
  ]

  # Thread pool configuration
  fork-join-executor {
    parallelism-min = 2
    parallelism-factor = 2.0
    parallelism-max = 4
  }
}

# Responder configuration
responder {
  # Official responder catalog URLs
  urls = [
    "https://download.thehive-project.org/responders.json"
  ]

  # Thread pool configuration
  fork-join-executor {
    parallelism-min = 2
    parallelism-factor = 2.0
    parallelism-max = 4
  }
}

# Job configuration for Docker execution
job {
  # Job runners - use Docker for analyzer execution
  runner = [docker]
}

# Docker configuration for analyzers
docker {
  # Auto cleanup containers after job completion
  autoRemove = true
}
